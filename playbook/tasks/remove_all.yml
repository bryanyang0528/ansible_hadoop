---
- hosts: all
  tasks:
  - name: Remove hadoop
    shell: rm -rf /opt/hadoop*
  - shell: rm -f  /usr/local/hadoop
  - shell: rm -rf {{ dfs_namenode_name_dir }}
  - shell: rm -rf {{ dfs_datanode_data_dir }}
  - shell: rm -rf {{ dfs_namenode_checkpoint_dir }}
  - shell: rm -rf {{ yarn_nodemanager_local_dirs }}
  - shell: rm -rf /home/hadoop /home/hdfs /home/yarn /home/mapred /home/hive
  - shell: userdel hdfs
  - shell: userdel yarn
  - shell: userdel mapred
  - shell: userdel hive
  - shell: userdel hadoop

- hosts: master
  tasks:
  - name: Remove hadoop
    shell: userdel zookeeper
  - shell: rm -rf /home/zookeeper
  - shell: rm -rf /opt/zookeeper*
  - shell: rm -f  /usr/local/zookeeper
  - shell: rm -rf /opt/hive*
  - shell: rm -rf /usr/local/hive
